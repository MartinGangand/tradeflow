import os

import numpy as np

from tradeflow.constants import FitMethodAR

current_directory = os.path.abspath(os.path.dirname(__file__))


class Namespace:

    def __init__(self):
        self.constant_parameter = None
        self.parameters = None

        self.simulation = None

        self.order = None
        self.size = None
        self.pct_buy = None
        self.mean_nb_consecutive_values = None
        self.std_nb_consecutive_values = None
        self.Q50_nb_consecutive_values = None
        self.Q75_nb_consecutive_values = None
        self.Q95_nb_consecutive_values = None
        self.Q99_nb_consecutive_values = None


class ResultsAR:
    """
    Results are from statsmodels.
    """

    @staticmethod
    def parameters_order_6(method: str) -> Namespace:
        obj = Namespace()
        if method == FitMethodAR.YULE_WALKER.value:
            obj.constant_parameter = 0
            obj.parameters = [0.20793670441358317, 0.15625334330632215, 0.08328570101676176, 0.10762268507210443, 0.12228963258158163, 0.07896963026086244]
        elif method == FitMethodAR.OLS_WITH_CST.value:
            obj.constant_parameter = 0.06400645100573674
            obj.parameters = [0.2091518029574414, 0.15836060267986327, 0.0834257462768201, 0.10653755478818688, 0.12165411140031872, 0.07969039271249247]

        return obj

    @staticmethod
    def simulated_signs(fit_method: str) -> Namespace:
        obj = Namespace()
        if fit_method == FitMethodAR.YULE_WALKER.value:
            obj.simulation = np.loadtxt(fname=os.path.join(current_directory, 'simulated_signs_yule_walker.csv'), dtype=float, delimiter=",")
        elif fit_method == FitMethodAR.OLS_WITH_CST.value:
            obj.simulation = np.loadtxt(fname=os.path.join(current_directory, 'simulated_signs_ols_with_cst.csv'), dtype=float, delimiter=",")

        return obj

    @staticmethod
    def simulation_summary_training_signs(fit_method: str) -> Namespace:
        obj = Namespace()
        if fit_method == FitMethodAR.YULE_WALKER.value:
            obj.constant_parameter = 0
            obj.parameters = [0.3250093822914605, 0.16010986629035687, 0.0996434718903434, 0.06912100343268926, 0.04771897373317636, 0.03540005513963736, 0.029651263460664448, 0.02523371356988983, 0.01759882254575476, 0.014794662580698023, 0.011149448586589724, 0.011975022108916713, 0.009405949187612206, 0.007766071148327624, 0.007983275874132872, 0.006299786889291192, 0.007042966662685162, 0.004396032467410877, 0.0020166808365035312, 0.0063593571976810065, 0.002707630699769206, 0.003563330780135256, 0.003462776092196998, 0.002346381458651565, 0.002686531875292001, 0.0037077567176374447, 0.0003783843227072437, 0.0014504374246365483, 0.002859901400489538, 0.0012892907428380647, 0.002482608541326238, -0.0005903302784173721, 0.0026882372759568962, 0.0012518726924661415, -8.06039945330462e-05, 0.0003406182221447249, -0.0009513891445807242, 0.0025523195080237623, 0.002672918057284555, 0.0014092851014167298, -0.00019865989427582677, 0.0027179383271050818, 0.0003481550079331392, -6.211186088862088e-05, -5.860021710644505e-06, -0.00021465630039548754, 0.0016432416101073502, 0.001614905935034431, 0.002056592550731144, 0.001750709441317477, 0.0014426077116533212, 0.002906774422383174]
        elif fit_method == FitMethodAR.OLS_WITH_CST.value:
            obj.constant_parameter = -0.00785762478494765
            obj.parameters = [0.3250204000192352, 0.16010905265858383, 0.09962762288033257, 0.0691252435263109, 0.047719333704018194, 0.035399437641598606, 0.029652250730444158, 0.025235861911757224, 0.01760374501084568, 0.01476832834644893, 0.011165197673214866, 0.011986491352005389, 0.009375063541979936, 0.007780090924354288, 0.007973620940442211, 0.006309134451244652, 0.007044738917830082, 0.004397774130618433, 0.002018162305769369, 0.0063620584951875276, 0.0027110454530104647, 0.003569658736071655, 0.003445651681261732, 0.0023549021681063672, 0.0026775661728635864, 0.003711316872172274, 0.0003794313712512954, 0.0014366713061919798, 0.0028674430324251345, 0.0012901639254466355, 0.002483725753727514, -0.0005892863587578061, 0.0026900510803428914, 0.0012538908523745704, -7.694758715128624e-05, 0.0003366181179862924, -0.0009506938601867341, 0.002538372618649523, 0.0026803415036774636, 0.0014097063752403767, -0.0001979809496536317, 0.002718664432574596, 0.0003490002859530253, -6.122876973299215e-05, -4.946143064463216e-06, -0.00021346605683958628, 0.0016444408527667256, 0.0016166886934803806, 0.0020589084358245, 0.00175430179599198, 0.0014383955722070904, 0.002906833723821349]

        obj.order = 52
        obj.size = 995093
        obj.pct_buy = 42.32
        obj.mean_nb_consecutive_values = 7.64
        obj.std_nb_consecutive_values = 32.34
        obj.Q50_nb_consecutive_values = 2
        obj.Q75_nb_consecutive_values = 4
        obj.Q95_nb_consecutive_values = 34
        obj.Q99_nb_consecutive_values = 95

        return obj
